#include <behaviors.dtsi>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/outputs.h>

#define ZMK_POINTING_DEFAULT_MOVE_VAL 800
#define ZMK_POINTING_DEFAULT_SCRL_VAL 120
#include <dt-bindings/zmk/pointing.h>

#include <input/processors.dtsi>

#include <dt-bindings/zmk/input_transform.h>

#include <zephyr/dt-bindings/input/input-event-codes.h>

// /* 名前を trackball_listener に修正し、末尾にセミコロンを追加 */
// 
// &trackball_listener {
//    /* ① 通常時の速度 (1.5倍) */
// 
//    input-processors = <&zip_xy_scaler 3 2>;
// 
//    /* ② 低速モード (SNIPE: Layer 3) */
//    /* 1/2 = 0.5倍速 */
// 
//    snipe {
//        layers = <3>;
//        input-processors = <&zip_xy_scaler 1 2>;
//    };
// 
//    /* ③ 高速モード (MOUSE: Layer 2) */
//    /* 5/2 = 2.5倍速 (ここは好きな数値に変えてOK) */
// 
//    turbo {
//        layers = <2>;
//        input-processors = <&zip_xy_scaler 5 2>;
//    };
// 
//    /* --- 以下スクロール設定 (変更なし) --- */
// 
//    scroller {
//        layers = <4>;
//        input-processors = <&zip_xy_to_scroll_mapper>;
//    };
// 
//    scroller_warp {
//        layers = <5>;
//        input-processors = <&zip_xy_scaler 4 1>, <&zip_xy_to_scroll_mapper>;
//    };
// 
//    scroller_snipe {
//        layers = <6>;
//        input-processors = <&zip_xy_scaler 1 4>, <&zip_xy_to_scroll_mapper>;
//    };
// };

/ {
    keymap {
        compatible = "zmk,keymap";

        default_layer {
            bindings = <
&kp A         &kp ESCAPE      &kp F1        &kp F2        &kp F3        &kp F4        &kp F5  &kp F6             &kp F7       &kp F8       &kp F9       &kp F10            &kp F11             &kp F12             &kp A          &kp B       &mo 1
&bt BT_SEL 0  &kp GRAVE       &kp NUMBER_1  &kp NUMBER_2  &kp NUMBER_3  &kp NUMBER_4  &kp N5  &kp NUMBER_6       &kp N7       &kp N8       &kp N9       &kp N0             &kp MINUS           &kp EQUAL           &kp BACKSPACE  &kp DEL
&bt BT_SEL 1  &kp TAB         &kp Q         &kp W         &kp E         &kp R         &kp T   &kp Y              &kp U        &kp I        &kp O        &kp P              &kp LEFT_BRACKET    &kp RIGHT_BRACKET   &kp BACKSLASH  &kp PG_UP
&bt BT_SEL 2  &kp CAPSLOCK    &kp A         &kp S         &kp D         &kp F         &kp G   &kp H              &kp J        &kp K        &kp L        &kp SEMICOLON      &kp SQT             &kp ENTER           &kp PAGE_DOWN
&to 1         &kp LEFT_SHIFT  &kp Z         &kp X         &kp C         &kp V         &kp B   &kp N              &kp M        &kp COMMA    &kp PERIOD   &kp SLASH          &kp RSHIFT          &kp UP_ARROW
&to 2         &kp LCTRL       &kp LEFT_WIN  &kp LEFT_ALT  &mkp MB1      &mkp MB2      &mo 1   &lt 2 BACKSPACE    &kp SPACE    &kp LEFT     &kp DOWN     &kp RIGHT_ARROW
            >;

            sensor-bindings =
                <&inc_dec_kp A B>,
                <&inc_dec_kp C D>,
                <&inc_dec_kp E F>,
                <&inc_dec_kp G H>;
        };
    };
};